{"sha":"47271b5648babe3b47d16e32dc10af7aba50f51a","node_id":"C_kwDOQFZuGNoAKDQ3MjcxYjU2NDhiYWJlM2I0N2QxNmUzMmRjMTBhZjdhYmE1MGY1MWE","commit":{"author":{"name":"Tom Fenwick","email":"twinwicksllc@gmail.com","date":"2025-11-23T04:12:22Z"},"committer":{"name":"Tom Fenwick","email":"twinwicksllc@gmail.com","date":"2025-11-23T04:12:22Z"},"message":"Antigravity Update","tree":{"sha":"0cef49911164f5b084f046df7ab43078c7ef12e9","url":"https://api.github.com/repos/twinwicksllc/expense-tracker/git/trees/0cef49911164f5b084f046df7ab43078c7ef12e9"},"url":"https://api.github.com/repos/twinwicksllc/expense-tracker/git/commits/47271b5648babe3b47d16e32dc10af7aba50f51a","comment_count":0,"verification":{"verified":false,"reason":"unsigned","signature":null,"payload":null,"verified_at":null}},"url":"https://api.github.com/repos/twinwicksllc/expense-tracker/commits/47271b5648babe3b47d16e32dc10af7aba50f51a","html_url":"https://github.com/twinwicksllc/expense-tracker/commit/47271b5648babe3b47d16e32dc10af7aba50f51a","comments_url":"https://api.github.com/repos/twinwicksllc/expense-tracker/commits/47271b5648babe3b47d16e32dc10af7aba50f51a/comments","author":{"login":"twinwicksllc","id":229545047,"node_id":"U_kgDODa6UVw","avatar_url":"https://avatars.githubusercontent.com/u/229545047?v=4","gravatar_id":"","url":"https://api.github.com/users/twinwicksllc","html_url":"https://github.com/twinwicksllc","followers_url":"https://api.github.com/users/twinwicksllc/followers","following_url":"https://api.github.com/users/twinwicksllc/following{/other_user}","gists_url":"https://api.github.com/users/twinwicksllc/gists{/gist_id}","starred_url":"https://api.github.com/users/twinwicksllc/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/twinwicksllc/subscriptions","organizations_url":"https://api.github.com/users/twinwicksllc/orgs","repos_url":"https://api.github.com/users/twinwicksllc/repos","events_url":"https://api.github.com/users/twinwicksllc/events{/privacy}","received_events_url":"https://api.github.com/users/twinwicksllc/received_events","type":"User","user_view_type":"public","site_admin":false},"committer":{"login":"twinwicksllc","id":229545047,"node_id":"U_kgDODa6UVw","avatar_url":"https://avatars.githubusercontent.com/u/229545047?v=4","gravatar_id":"","url":"https://api.github.com/users/twinwicksllc","html_url":"https://github.com/twinwicksllc","followers_url":"https://api.github.com/users/twinwicksllc/followers","following_url":"https://api.github.com/users/twinwicksllc/following{/other_user}","gists_url":"https://api.github.com/users/twinwicksllc/gists{/gist_id}","starred_url":"https://api.github.com/users/twinwicksllc/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/twinwicksllc/subscriptions","organizations_url":"https://api.github.com/users/twinwicksllc/orgs","repos_url":"https://api.github.com/users/twinwicksllc/repos","events_url":"https://api.github.com/users/twinwicksllc/events{/privacy}","received_events_url":"https://api.github.com/users/twinwicksllc/received_events","type":"User","user_view_type":"public","site_admin":false},"parents":[{"sha":"f095d1eec1e5fa600711d8a67bb623cfe7c01a7e","url":"https://api.github.com/repos/twinwicksllc/expense-tracker/commits/f095d1eec1e5fa600711d8a67bb623cfe7c01a7e","html_url":"https://github.com/twinwicksllc/expense-tracker/commit/f095d1eec1e5fa600711d8a67bb623cfe7c01a7e"}],"stats":{"total":716,"additions":357,"deletions":359},"files":[{"sha":"157846a8ef247ba4eef50db175ce7b67a3799ab6","filename":"frontend/app.js","status":"modified","additions":322,"deletions":333,"changes":655,"blob_url":"https://github.com/twinwicksllc/expense-tracker/blob/47271b5648babe3b47d16e32dc10af7aba50f51a/frontend%2Fapp.js","raw_url":"https://github.com/twinwicksllc/expense-tracker/raw/47271b5648babe3b47d16e32dc10af7aba50f51a/frontend%2Fapp.js","contents_url":"https://api.github.com/repos/twinwicksllc/expense-tracker/contents/frontend%2Fapp.js?ref=47271b5648babe3b47d16e32dc10af7aba50f51a","patch":"@@ -1,15 +1,4 @@\n-// Configuration\n-const CONFIG = {\n-    API_BASE_URL: 'https://fcnq8h7mai.execute-api.us-east-1.amazonaws.com/prod',\n-    COGNITO: {\n-        USER_POOL_ID: 'us-east-1_iSsgMCrkM',\n-        CLIENT_ID: '6jb82h9lrvh29505t1ihavfte9',\n-        REGION: 'us-east-1',\n-        DOMAIN: 'https://expense-tracker-prod-v2.auth.us-east-1.amazoncognito.com',\n-        REDIRECT_URI: 'https://app.twin-wicks.com/callback',\n-        SIGN_OUT_URI: 'https://app.twin-wicks.com'\n-    }\n-};\n+// Configuration loaded from config.js\n \n // State Management\n const state = {\n@@ -24,14 +13,14 @@ const VALID_CATEGORIES = ['Office Supplies', 'Travel', 'Meals', 'Software', 'Equ\n \n function validateExpenseForm(data) {\n     const errors = [];\n-    \n+\n     // Validate vendor\n     if (!data.vendor || data.vendor.trim().length === 0) {\n         errors.push('Vendor is required');\n     } else if (data.vendor.length > 200) {\n         errors.push('Vendor must be less than 200 characters');\n     }\n-    \n+\n     // Validate amount\n     if (!data.amount || isNaN(data.amount)) {\n         errors.push('Amount must be a valid number');\n@@ -40,7 +29,7 @@ function validateExpenseForm(data) {\n     } else if (data.amount > 1000000) {\n         errors.push('Amount must be less than $1,000,000');\n     }\n-    \n+\n     // Validate date\n     if (!data.date) {\n         errors.push('Date is required');\n@@ -52,19 +41,19 @@ function validateExpenseForm(data) {\n             errors.push('Date cannot be in the future');\n         }\n     }\n-    \n+\n     // Validate category\n     if (!data.category || data.category === 'Select category') {\n         errors.push('Category is required');\n     } else if (!VALID_CATEGORIES.includes(data.category)) {\n         errors.push('Invalid category selected');\n     }\n-    \n+\n     // Validate optional fields\n     if (data.description && data.description.length > 1000) {\n         errors.push('Description must be less than 1000 characters');\n     }\n-    \n+\n     return {\n         isValid: errors.length === 0,\n         errors\n@@ -158,7 +147,7 @@ async function signup(email, password) {\n         });\n \n         const data = await response.json();\n-        \n+\n         if (!response.ok) {\n             throw new Error(data.message || 'Signup failed');\n         }\n@@ -178,7 +167,7 @@ async function confirmSignup(email, code) {\n         });\n \n         const data = await response.json();\n-        \n+\n         if (!response.ok) {\n             throw new Error(data.message || 'Confirmation failed');\n         }\n@@ -198,7 +187,7 @@ async function login(email, password) {\n         });\n \n         const data = await response.json();\n-        \n+\n         if (!response.ok) {\n             throw new Error(data.message || 'Login failed');\n         }\n@@ -226,7 +215,7 @@ function logout() {\n function checkAuth() {\n     const token = localStorage.getItem('idToken');\n     const email = localStorage.getItem('userEmail');\n-    \n+\n     if (token && email) {\n         state.idToken = token;\n         state.user = { email };\n@@ -365,14 +354,14 @@ function initializeNavigation() {\n     if (navButtons.length === 0) {\n         return; // Not on dashboard page\n     }\n-    \n+\n     // Remove any existing listeners by cloning and replacing nodes\n     // This prevents duplicate listeners if function is called multiple times\n     navButtons.forEach(btn => {\n         const newBtn = btn.cloneNode(true);\n         btn.parentNode.replaceChild(newBtn, btn);\n     });\n-    \n+\n     // Attach fresh event listeners to all nav buttons\n     document.querySelectorAll('.nav-btn').forEach(btn => {\n         btn.addEventListener('click', () => {\n@@ -384,14 +373,14 @@ function initializeNavigation() {\n             }\n         });\n     });\n-    \n+\n     console.log('Navigation initialized: event listeners attached to', navButtons.length, 'buttons');\n }\n \n function showAuthScreen() {\n     const authScreen = document.getElementById('auth-screen');\n     const mainScreen = document.getElementById('main-screen');\n-    \n+\n     if (authScreen) authScreen.style.display = 'block';\n     if (mainScreen) mainScreen.style.display = 'none';\n }\n@@ -400,21 +389,21 @@ function showMainScreen() {\n     const authScreen = document.getElementById('auth-screen');\n     const mainScreen = document.getElementById('main-screen');\n     const userEmail = document.getElementById('user-email');\n-    \n+\n     if (authScreen) authScreen.style.display = 'none';\n     if (mainScreen) mainScreen.style.display = 'block';\n     if (userEmail && state.user && state.user.email) {\n         userEmail.textContent = state.user.email;\n     }\n-    \n+\n     // Only load dashboard if dashboard elements exist (not on settings page)\n     if (document.getElementById('total-expenses')) {\n         loadDashboard();\n     }\n-    \n+\n     // Initialize navigation event listeners (must run after main screen is shown)\n     initializeNavigation();\n-    \n+\n     // Initialize logout button (must run after main screen is shown)\n     const logoutBtn = document.getElementById('logout-btn');\n     if (logoutBtn && !logoutBtn.dataset.initialized) {\n@@ -481,12 +470,12 @@ async function loadDashboard() {\n \n         // Render category chart\n         renderCategoryChart(categoryTotals);\n-        \n+\n         // Initialize chart controls and load monthly chart\n         if (window.dashboardEnhanced && typeof window.dashboardEnhanced.initializeChartControls === 'function') {\n             window.dashboardEnhanced.initializeChartControls();\n         }\n-        \n+\n         if (window.dashboardEnhanced && typeof window.dashboardEnhanced.updateMonthlyChart === 'function') {\n             await window.dashboardEnhanced.updateMonthlyChart();\n         }\n@@ -512,7 +501,7 @@ function renderCategoryChart(categoryTotals) {\n \n     sortedCategories.forEach(([category, amount]) => {\n         const percentage = (amount / maxAmount) * 100;\n-        \n+\n         const barHTML = `\n             <div class=\"category-bar\">\n                 <div class=\"category-name\">${category}</div>\n@@ -522,7 +511,7 @@ function renderCategoryChart(categoryTotals) {\n                 <div class=\"category-amount\">${formatCurrency(amount)}</div>\n             </div>\n         `;\n-        \n+\n         chartContainer.insertAdjacentHTML('beforeend', barHTML);\n     });\n }\n@@ -535,22 +524,22 @@ async function loadExpenses() {\n         const projectId = document.getElementById('filter-project').value;\n \n         const [sortField, sortOrder] = sortBy.split('-');\n-        \n+\n         const filters = {\n             sortBy: sortField,\n             order: sortOrder\n         };\n-        \n+\n         // Only add category filter if it has a value\n         if (category && category !== '') {\n             filters.category = category;\n         }\n-        \n+\n         // Only add project filter if it has a value\n         if (projectId && projectId !== '') {\n             filters.projectId = projectId;\n         }\n-        \n+\n         const expenses = await getExpenses(filters);\n \n         state.expenses = expenses;\n@@ -601,7 +590,7 @@ function renderExpensesList(expenses) {\n                 </div>\n             </div>\n         `;\n-        \n+\n         listContainer.insertAdjacentHTML('beforeend', cardHTML);\n     });\n }\n@@ -612,18 +601,18 @@ function resetExpenseForm() {\n     document.getElementById('preview-section').style.display = 'none';\n     document.getElementById('upload-area').style.display = 'block';\n     document.getElementById('parsing-status').style.display = 'none';\n-    \n+\n     // Clear s3Key state\n     state.currentReceiptS3Key = null;\n-    \n+\n     // Set today's date as default\n     document.getElementById('expense-date').valueAsDate = new Date();\n }\n \n async function handleReceiptUpload(file) {\n     console.log('[DEBUG] handleReceiptUpload called');\n     showDebugMessage('Processing file...');\n-    \n+\n     // Validate file exists\n     if (!file) {\n         const error = 'No file provided';\n@@ -632,7 +621,7 @@ async function handleReceiptUpload(file) {\n         showError('expense-error', error);\n         return;\n     }\n-    \n+\n     // File size validation (10MB limit)\n     const maxSize = 10 * 1024 * 1024; // 10MB\n     if (file.size > maxSize) {\n@@ -642,7 +631,7 @@ async function handleReceiptUpload(file) {\n         showError('expense-error', error);\n         return;\n     }\n-    \n+\n     // File type validation (check both MIME type and extension for mobile compatibility)\n     const allowedMimeTypes = [\n         'image/jpeg', 'image/jpg', 'image/png', 'image/gif', 'image/webp', 'image/heic',\n@@ -651,22 +640,22 @@ async function handleReceiptUpload(file) {\n         'application/vnd.openxmlformats-officedocument.wordprocessingml.document'\n     ];\n     const allowedExtensions = ['.jpg', '.jpeg', '.png', '.gif', '.webp', '.heic', '.pdf', '.doc', '.docx'];\n-    \n+\n     const fileName = file.name.toLowerCase();\n     const fileExt = fileName.substring(fileName.lastIndexOf('.'));\n     const isValidMimeType = allowedMimeTypes.includes(file.type);\n     const isValidExtension = allowedExtensions.includes(fileExt);\n-    \n+\n     console.log('[DEBUG] File validation:', { type: file.type, ext: fileExt, validMime: isValidMimeType, validExt: isValidExtension });\n-    \n+\n     if (!isValidMimeType && !isValidExtension) {\n         const error = `Invalid file type: ${file.type || 'unknown'} (${fileExt})`;\n         console.error('[DEBUG]', error);\n         showDebugMessage(`ERROR: ${error}`);\n         showError('expense-error', 'Please upload an image, PDF, or Word document');\n         return;\n     }\n-    \n+\n     showDebugMessage('File validated, showing preview...');\n     console.log('[DEBUG] File validation passed');\n \n@@ -698,19 +687,19 @@ async function handleReceiptUpload(file) {\n         showDebugMessage('Parsing receipt with AI...');\n         document.getElementById('parsing-status').style.display = 'block';\n         const parsed = await parseReceipt(file);\n-        \n+\n         console.log('[DEBUG] Receipt parsed:', parsed);\n         showDebugMessage('Receipt parsed successfully!');\n-        \n+\n         // Store s3Key in state for later use\n         state.currentReceiptS3Key = parsed.s3Key;\n-        \n+\n         // Populate form with parsed data\n         if (parsed.vendor) document.getElementById('expense-vendor').value = parsed.vendor;\n         if (parsed.amount) document.getElementById('expense-amount').value = parsed.amount;\n         if (parsed.date) document.getElementById('expense-date').value = parsed.date;\n         if (parsed.category) document.getElementById('expense-category').value = parsed.category;\n-        \n+\n         document.getElementById('parsing-status').style.display = 'none';\n     } catch (error) {\n         console.error('[DEBUG] Failed to parse receipt:', error);\n@@ -763,13 +752,13 @@ document.addEventListener('DOMContentLoaded', async () => {\n     // Do NOT intercept OAuth callbacks meant for other pages (like settings.html)\n     const urlParams = new URLSearchParams(window.location.search);\n     const currentPath = window.location.pathname;\n-    \n+\n     // Only handle OAuth callback if we're on the main page or /callback\n     // NOT on settings.html or other pages that handle their own OAuth flows\n     // Also check sessionStorage to see if this is a LINK_ACCOUNT flow\n     const oauthFlow = sessionStorage.getItem('oauthFlow');\n-    \n-    if ((urlParams.has('code') || urlParams.has('error')) && \n+\n+    if ((urlParams.has('code') || urlParams.has('error')) &&\n         (currentPath === '/' || currentPath === '/index.html' || currentPath === '/callback')) {\n         // If this is marked as LINK_ACCOUNT flow, don't intercept it\n         if (oauthFlow === 'LINK_ACCOUNT') {\n@@ -779,7 +768,7 @@ document.addEventListener('DOMContentLoaded', async () => {\n         await handleOAuthCallback();\n         return;\n     }\n-    \n+\n     // Check authentication on load (supports both email/password and OAuth)\n     if (!checkAuth() && !checkOAuthAuth()) {\n         showAuthScreen();\n@@ -789,275 +778,275 @@ document.addEventListener('DOMContentLoaded', async () => {\n \n     // Only initialize dashboard-specific event listeners if on dashboard page\n     const isDashboardPage = document.getElementById('expense-form') !== null;\n-    \n+\n     // Auth tab switching (only on dashboard page)\n     const tabButtons = document.querySelectorAll('.tab-btn');\n     if (tabButtons.length > 0) {\n         tabButtons.forEach(btn => {\n-        btn.addEventListener('click', () => {\n-            const tab = btn.dataset.tab;\n-            \n-            document.querySelectorAll('.tab-btn').forEach(b => b.classList.remove('active'));\n-            btn.classList.add('active');\n-            \n-            document.querySelectorAll('.auth-form').forEach(f => f.classList.remove('active'));\n-            document.getElementById(`${tab}-form`).classList.add('active');\n+            btn.addEventListener('click', () => {\n+                const tab = btn.dataset.tab;\n+\n+                document.querySelectorAll('.tab-btn').forEach(b => b.classList.remove('active'));\n+                btn.classList.add('active');\n+\n+                document.querySelectorAll('.auth-form').forEach(f => f.classList.remove('active'));\n+                document.getElementById(`${tab}-form`).classList.add('active');\n+            });\n         });\n-    });\n     }\n \n     // Login form\n     const loginForm = document.getElementById('login-form');\n     if (loginForm) {\n         loginForm.addEventListener('submit', async (e) => {\n-        e.preventDefault();\n-        \n-        const email = document.getElementById('login-email').value;\n-        const password = document.getElementById('login-password').value;\n-\n-        try {\n-            showLoading();\n-            await login(email, password);\n-            showMainScreen();\n-        } catch (error) {\n-            showError('login-error', error.message);\n-        } finally {\n-            showLoading(false);\n-        }\n-    });\n+            e.preventDefault();\n+\n+            const email = document.getElementById('login-email').value;\n+            const password = document.getElementById('login-password').value;\n+\n+            try {\n+                showLoading();\n+                await login(email, password);\n+                showMainScreen();\n+            } catch (error) {\n+                showError('login-error', error.message);\n+            } finally {\n+                showLoading(false);\n+            }\n+        });\n     }\n \n     // Signup form\n     const signupForm = document.getElementById('signup-form');\n     if (signupForm) {\n         signupForm.addEventListener('submit', async (e) => {\n-        e.preventDefault();\n-        \n-        const email = document.getElementById('signup-email').value;\n-        const password = document.getElementById('signup-password').value;\n-        const confirm = document.getElementById('signup-confirm').value;\n-\n-        if (password !== confirm) {\n-            showError('signup-error', 'Passwords do not match');\n-            return;\n-        }\n+            e.preventDefault();\n \n-        try {\n-            showLoading();\n-            await signup(email, password);\n-            showSuccess('signup-success', 'Account created! Check your email for confirmation code.');\n-            // Show confirmation code input\n-            document.getElementById('confirmation-section').style.display = 'block';\n-            document.getElementById('confirmation-email').value = email;\n-            document.getElementById('signup-form').reset();\n-            \n-            // Switch to login tab after 2 seconds\n-            setTimeout(() => {\n-                document.querySelector('.tab-btn[data-tab=\"login\"]').click();\n-            }, 2000);\n-        } catch (error) {\n-            showError('signup-error', error.message);\n-        } finally {\n-            showLoading(false);\n-        }\n-    });\n+            const email = document.getElementById('signup-email').value;\n+            const password = document.getElementById('signup-password').value;\n+            const confirm = document.getElementById('signup-confirm').value;\n+\n+            if (password !== confirm) {\n+                showError('signup-error', 'Passwords do not match');\n+                return;\n+            }\n+\n+            try {\n+                showLoading();\n+                await signup(email, password);\n+                showSuccess('signup-success', 'Account created! Check your email for confirmation code.');\n+                // Show confirmation code input\n+                document.getElementById('confirmation-section').style.display = 'block';\n+                document.getElementById('confirmation-email').value = email;\n+                document.getElementById('signup-form').reset();\n+\n+                // Switch to login tab after 2 seconds\n+                setTimeout(() => {\n+                    document.querySelector('.tab-btn[data-tab=\"login\"]').click();\n+                }, 2000);\n+            } catch (error) {\n+                showError('signup-error', error.message);\n+            } finally {\n+                showLoading(false);\n+            }\n+        });\n     }\n \n     // Confirmation form\n     const confirmForm = document.getElementById('confirm-form');\n     if (confirmForm) {\n         confirmForm.addEventListener('submit', async (e) => {\n-        e.preventDefault();\n-        \n-        const email = document.getElementById('confirmation-email').value;\n-        const code = document.getElementById('confirmation-code').value;\n-\n-        try {\n-            showLoading();\n-            await confirmSignup(email, code);\n-            showSuccess('confirm-success', 'Email confirmed! You can now login.');\n-            document.getElementById('confirmation-section').style.display = 'none';\n-            document.getElementById('confirm-form').reset();\n-            // Switch to login tab\n-            setTimeout(() => {\n-                document.querySelector('.tab-btn[data-tab=\"login\"]').click();\n-            }, 2000);\n-        } catch (error) {\n-            showError('confirm-error', error.message);\n-        } finally {\n-            showLoading(false);\n-        }\n-    });\n+            e.preventDefault();\n+\n+            const email = document.getElementById('confirmation-email').value;\n+            const code = document.getElementById('confirmation-code').value;\n+\n+            try {\n+                showLoading();\n+                await confirmSignup(email, code);\n+                showSuccess('confirm-success', 'Email confirmed! You can now login.');\n+                document.getElementById('confirmation-section').style.display = 'none';\n+                document.getElementById('confirm-form').reset();\n+                // Switch to login tab\n+                setTimeout(() => {\n+                    document.querySelector('.tab-btn[data-tab=\"login\"]').click();\n+                }, 2000);\n+            } catch (error) {\n+                showError('confirm-error', error.message);\n+            } finally {\n+                showLoading(false);\n+            }\n+        });\n     }\n \n     // Dashboard-specific initialization\n     if (isDashboardPage) {\n         // Navigation event listeners are now initialized in initializeNavigation()\n         // which is called from showMainScreen() to work with OAuth login\n \n-    // Receipt upload\n-    const uploadArea = document.getElementById('upload-area');\n-    const receiptInput = document.getElementById('receipt-input');\n-\n-    // File input change handler (label handles click natively for mobile compatibility)\n-    receiptInput.addEventListener('change', async (e) => {\n-        console.log('[DEBUG] File input change event fired');\n-        console.log('[DEBUG] Files selected:', e.target.files.length);\n-        \n-        try {\n-            if (e.target.files.length > 0) {\n-                const file = e.target.files[0];\n-                console.log('[DEBUG] File details:', {\n-                    name: file.name,\n-                    type: file.type,\n-                    size: file.size\n-                });\n-                showDebugMessage(`File selected: ${file.name} (${file.type})`);\n-                await handleReceiptUpload(file);\n-            } else {\n-                console.log('[DEBUG] No files selected');\n-                showDebugMessage('No files selected');\n+        // Receipt upload\n+        const uploadArea = document.getElementById('upload-area');\n+        const receiptInput = document.getElementById('receipt-input');\n+\n+        // File input change handler (label handles click natively for mobile compatibility)\n+        receiptInput.addEventListener('change', async (e) => {\n+            console.log('[DEBUG] File input change event fired');\n+            console.log('[DEBUG] Files selected:', e.target.files.length);\n+\n+            try {\n+                if (e.target.files.length > 0) {\n+                    const file = e.target.files[0];\n+                    console.log('[DEBUG] File details:', {\n+                        name: file.name,\n+                        type: file.type,\n+                        size: file.size\n+                    });\n+                    showDebugMessage(`File selected: ${file.name} (${file.type})`);\n+                    await handleReceiptUpload(file);\n+                } else {\n+                    console.log('[DEBUG] No files selected');\n+                    showDebugMessage('No files selected');\n+                }\n+            } catch (error) {\n+                console.error('[DEBUG] Error in file upload:', error);\n+                showDebugMessage(`ERROR: ${error.message}`);\n+                showError('expense-error', `Upload failed: ${error.message}`);\n             }\n-        } catch (error) {\n-            console.error('[DEBUG] Error in file upload:', error);\n-            showDebugMessage(`ERROR: ${error.message}`);\n-            showError('expense-error', `Upload failed: ${error.message}`);\n-        }\n-    });\n+        });\n \n-    // Drag and drop\n-    uploadArea.addEventListener('dragover', (e) => {\n-        e.preventDefault();\n-        uploadArea.classList.add('dragover');\n-    });\n+        // Drag and drop\n+        uploadArea.addEventListener('dragover', (e) => {\n+            e.preventDefault();\n+            uploadArea.classList.add('dragover');\n+        });\n \n-    uploadArea.addEventListener('dragleave', () => {\n-        uploadArea.classList.remove('dragover');\n-    });\n+        uploadArea.addEventListener('dragleave', () => {\n+            uploadArea.classList.remove('dragover');\n+        });\n \n-    uploadArea.addEventListener('drop', (e) => {\n-        e.preventDefault();\n-        uploadArea.classList.remove('dragover');\n-        \n-        if (e.dataTransfer.files.length > 0) {\n-            receiptInput.files = e.dataTransfer.files;\n-            handleReceiptUpload(e.dataTransfer.files[0]);\n-        }\n-    });\n+        uploadArea.addEventListener('drop', (e) => {\n+            e.preventDefault();\n+            uploadArea.classList.remove('dragover');\n \n-    // Remove receipt\n-    document.getElementById('remove-receipt').addEventListener('click', () => {\n-        receiptInput.value = '';\n-        document.getElementById('preview-section').style.display = 'none';\n-        document.getElementById('upload-area').style.display = 'block';\n-    });\n+            if (e.dataTransfer.files.length > 0) {\n+                receiptInput.files = e.dataTransfer.files;\n+                handleReceiptUpload(e.dataTransfer.files[0]);\n+            }\n+        });\n \n-    // Expense form submission\n-    document.getElementById('expense-form').addEventListener('submit', async (e) => {\n-        e.preventDefault();\n-\n-        const expenseData = {\n-            vendor: document.getElementById('expense-vendor').value,\n-            amount: parseFloat(document.getElementById('expense-amount').value),\n-            date: document.getElementById('expense-date').value,\n-            category: document.getElementById('expense-category').value,\n-            description: document.getElementById('expense-description').value,\n-            projectId: document.getElementById('expense-project').value || null,\n-            notes: ''\n-        };\n-        \n-        // Validate form data\n-        const validation = validateExpenseForm(expenseData);\n-        if (!validation.isValid) {\n-            showError('expense-error', validation.errors.join(', '));\n-            return;\n-        }\n-        \n-        // Only include s3Key if a receipt was uploaded\n-        if (state.currentReceiptS3Key) {\n-            expenseData.s3Key = state.currentReceiptS3Key;\n-        }\n+        // Remove receipt\n+        document.getElementById('remove-receipt').addEventListener('click', () => {\n+            receiptInput.value = '';\n+            document.getElementById('preview-section').style.display = 'none';\n+            document.getElementById('upload-area').style.display = 'block';\n+        });\n \n-        try {\n-            showLoading();\n-            await createExpense(expenseData);\n-            showSuccess('expense-success', 'Expense added successfully!');\n-            \n-            setTimeout(() => {\n-                switchView('expenses');\n-            }, 1500);\n-        } catch (error) {\n-            showError('expense-error', error.message);\n-        } finally {\n-            showLoading(false);\n-        }\n-    });\n+        // Expense form submission\n+        document.getElementById('expense-form').addEventListener('submit', async (e) => {\n+            e.preventDefault();\n+\n+            const expenseData = {\n+                vendor: document.getElementById('expense-vendor').value,\n+                amount: parseFloat(document.getElementById('expense-amount').value),\n+                date: document.getElementById('expense-date').value,\n+                category: document.getElementById('expense-category').value,\n+                description: document.getElementById('expense-description').value,\n+                projectId: document.getElementById('expense-project').value || null,\n+                notes: ''\n+            };\n \n-    // Cancel expense\n-    document.getElementById('cancel-expense').addEventListener('click', () => {\n-        switchView('expenses');\n-    });\n+            // Validate form data\n+            const validation = validateExpenseForm(expenseData);\n+            if (!validation.isValid) {\n+                showError('expense-error', validation.errors.join(', '));\n+                return;\n+            }\n \n-    // Edit expense form\n-    document.getElementById('edit-expense-form').addEventListener('submit', async (e) => {\n-        e.preventDefault();\n-\n-        const transactionId = document.getElementById('edit-transaction-id').value;\n-        const updates = {\n-            vendor: document.getElementById('edit-vendor').value,\n-            amount: parseFloat(document.getElementById('edit-amount').value),\n-            transactionDate: document.getElementById('edit-date').value,\n-            category: document.getElementById('edit-category').value,\n-            projectId: document.getElementById('edit-project').value || null,\n-            description: document.getElementById('edit-description').value\n-        };\n+            // Only include s3Key if a receipt was uploaded\n+            if (state.currentReceiptS3Key) {\n+                expenseData.s3Key = state.currentReceiptS3Key;\n+            }\n \n-        // Validate form data\n-        const validation = validateExpenseForm({\n-            vendor: updates.vendor,\n-            amount: updates.amount,\n-            date: updates.transactionDate,\n-            category: updates.category,\n-            description: updates.description\n+            try {\n+                showLoading();\n+                await createExpense(expenseData);\n+                showSuccess('expense-success', 'Expense added successfully!');\n+\n+                setTimeout(() => {\n+                    switchView('expenses');\n+                }, 1500);\n+            } catch (error) {\n+                showError('expense-error', error.message);\n+            } finally {\n+                showLoading(false);\n+            }\n         });\n-        if (!validation.isValid) {\n-            showError('edit-error', validation.errors.join(', '));\n-            return;\n-        }\n \n-        try {\n-            showLoading();\n-            await updateExpense(transactionId, updates);\n-            document.getElementById('edit-modal').classList.remove('show');\n-            await loadExpenses();\n-            if (state.currentView === 'dashboard') {\n-                await loadDashboard();\n+        // Cancel expense\n+        document.getElementById('cancel-expense').addEventListener('click', () => {\n+            switchView('expenses');\n+        });\n+\n+        // Edit expense form\n+        document.getElementById('edit-expense-form').addEventListener('submit', async (e) => {\n+            e.preventDefault();\n+\n+            const transactionId = document.getElementById('edit-transaction-id').value;\n+            const updates = {\n+                vendor: document.getElementById('edit-vendor').value,\n+                amount: parseFloat(document.getElementById('edit-amount').value),\n+                transactionDate: document.getElementById('edit-date').value,\n+                category: document.getElementById('edit-category').value,\n+                projectId: document.getElementById('edit-project').value || null,\n+                description: document.getElementById('edit-description').value\n+            };\n+\n+            // Validate form data\n+            const validation = validateExpenseForm({\n+                vendor: updates.vendor,\n+                amount: updates.amount,\n+                date: updates.transactionDate,\n+                category: updates.category,\n+                description: updates.description\n+            });\n+            if (!validation.isValid) {\n+                showError('edit-error', validation.errors.join(', '));\n+                return;\n             }\n-        } catch (error) {\n-            showError('edit-error', error.message);\n-        } finally {\n-            showLoading(false);\n-        }\n-    });\n \n-    // Close modal\n-    document.querySelectorAll('.close-modal').forEach(btn => {\n-        btn.addEventListener('click', () => {\n-            document.getElementById('edit-modal').classList.remove('show');\n+            try {\n+                showLoading();\n+                await updateExpense(transactionId, updates);\n+                document.getElementById('edit-modal').classList.remove('show');\n+                await loadExpenses();\n+                if (state.currentView === 'dashboard') {\n+                    await loadDashboard();\n+                }\n+            } catch (error) {\n+                showError('edit-error', error.message);\n+            } finally {\n+                showLoading(false);\n+            }\n+        });\n+\n+        // Close modal\n+        document.querySelectorAll('.close-modal').forEach(btn => {\n+            btn.addEventListener('click', () => {\n+                document.getElementById('edit-modal').classList.remove('show');\n+            });\n         });\n-    });\n \n-    // Filters\n-    document.getElementById('sort-by').addEventListener('change', loadExpenses);\n-    document.getElementById('filter-category').addEventListener('change', loadExpenses);\n-    document.getElementById('filter-project').addEventListener('change', loadExpenses);\n-    \n-    // Initialize project events\n-    initializeProjectEvents();\n-    \n-    // Initialize settings view\n-    initializeSettingsView();\n-    \n+        // Filters\n+        document.getElementById('sort-by').addEventListener('change', loadExpenses);\n+        document.getElementById('filter-category').addEventListener('change', loadExpenses);\n+        document.getElementById('filter-project').addEventListener('change', loadExpenses);\n+\n+        // Initialize project events\n+        initializeProjectEvents();\n+\n+        // Initialize settings view\n+        initializeSettingsView();\n+\n         // Load projects on app start if authenticated\n         if (checkAuth()) {\n             loadProjectDropdowns().catch(console.error);\n@@ -1070,7 +1059,7 @@ document.addEventListener('DOMContentLoaded', async () => {\n // Project API functions\n const ProjectAPI = {\n     baseURL: 'https://fcnq8h7mai.execute-api.us-east-1.amazonaws.com/prod',\n-    \n+\n     async getProjects() {\n         const token = localStorage.getItem('idToken');\n         const response = await fetch(`${this.baseURL}/projects`, {\n@@ -1079,14 +1068,14 @@ const ProjectAPI = {\n                 'Content-Type': 'application/json'\n             }\n         });\n-        \n+\n         if (!response.ok) {\n             throw new Error('Failed to fetch projects');\n         }\n-        \n+\n         return await response.json();\n     },\n-    \n+\n     async createProject(projectData) {\n         const token = localStorage.getItem('idToken');\n         const response = await fetch(`${this.baseURL}/projects`, {\n@@ -1097,15 +1086,15 @@ const ProjectAPI = {\n             },\n             body: JSON.stringify(projectData)\n         });\n-        \n+\n         if (!response.ok) {\n             const error = await response.json();\n             throw new Error(error.message || 'Failed to create project');\n         }\n-        \n+\n         return await response.json();\n     },\n-    \n+\n     async updateProject(projectId, projectData) {\n         const token = localStorage.getItem('idToken');\n         const response = await fetch(`${this.baseURL}/projects/${projectId}`, {\n@@ -1116,15 +1105,15 @@ const ProjectAPI = {\n             },\n             body: JSON.stringify(projectData)\n         });\n-        \n+\n         if (!response.ok) {\n             const error = await response.json();\n             throw new Error(error.message || 'Failed to update project');\n         }\n-        \n+\n         return await response.json();\n     },\n-    \n+\n     async deleteProject(projectId) {\n         const token = localStorage.getItem('idToken');\n         const response = await fetch(`${this.baseURL}/projects/${projectId}`, {\n@@ -1134,11 +1123,11 @@ const ProjectAPI = {\n                 'Content-Type': 'application/json'\n             }\n         });\n-        \n+\n         if (!response.ok) {\n             throw new Error('Failed to delete project');\n         }\n-        \n+\n         return await response.json();\n     }\n };\n@@ -1165,7 +1154,7 @@ async function loadProjects() {\n // Render projects list\n function renderProjects() {\n     const projectsList = document.getElementById('projects-list');\n-    \n+\n     if (!allProjects || allProjects.length === 0) {\n         projectsList.innerHTML = `\n             <div class=\"empty-state\">\n@@ -1175,7 +1164,7 @@ function renderProjects() {\n         `;\n         return;\n     }\n-    \n+\n     projectsList.innerHTML = allProjects.map(project => `\n         <div class=\"project-card\">\n             <div class=\"project-header\">\n@@ -1205,19 +1194,19 @@ async function loadProjectDropdowns() {\n     const expenseProjectSelect = document.getElementById('expense-project');\n     const editProjectSelect = document.getElementById('edit-project');\n     const filterProjectSelect = document.getElementById('filter-project');\n-    \n-    const projectOptions = allProjects.map(project => \n+\n+    const projectOptions = allProjects.map(project =>\n         `<option value=\"${project.projectId}\">${escapeHtml(project.name)}</option>`\n     ).join('');\n-    \n+\n     if (expenseProjectSelect) {\n         expenseProjectSelect.innerHTML = '<option value=\"\">No Project</option>' + projectOptions;\n     }\n-    \n+\n     if (editProjectSelect) {\n         editProjectSelect.innerHTML = '<option value=\"\">No Project</option>' + projectOptions;\n     }\n-    \n+\n     if (filterProjectSelect) {\n         filterProjectSelect.innerHTML = '<option value=\"\">All Projects</option>' + projectOptions;\n     }\n@@ -1231,10 +1220,10 @@ function showProjectModal(projectId = null) {\n     const projectNameInput = document.getElementById('project-name');\n     const projectDescInput = document.getElementById('project-description');\n     const projectError = document.getElementById('project-error');\n-    \n+\n     // Clear error\n     projectError.textContent = '';\n-    \n+\n     if (projectId) {\n         // Edit mode\n         const project = allProjects.find(p => p.projectId === projectId);\n@@ -1253,7 +1242,7 @@ function showProjectModal(projectId = null) {\n         projectDescInput.value = '';\n         currentEditingProject = null;\n     }\n-    \n+\n     modal.style.display = 'flex';\n }\n \n@@ -1294,37 +1283,37 @@ async function deleteProject(projectId) {\n // Handle project form submission\n async function handleProjectFormSubmit(e) {\n     e.preventDefault();\n-    \n+\n     const projectId = document.getElementById('project-id').value;\n     const projectName = document.getElementById('project-name').value.trim();\n     const projectDesc = document.getElementById('project-description').value.trim();\n     const projectError = document.getElementById('project-error');\n-    \n+\n     // Validation\n     if (!projectName) {\n         projectError.textContent = 'Project name is required';\n         return;\n     }\n-    \n+\n     if (projectName.length > 120) {\n         projectError.textContent = 'Project name must be 120 characters or less';\n         return;\n     }\n-    \n+\n     if (projectDesc && projectDesc.length > 500) {\n         projectError.textContent = 'Description must be 500 characters or less';\n         return;\n     }\n-    \n+\n     try {\n         showLoading();\n         projectError.textContent = '';\n-        \n+\n         const projectData = {\n             name: projectName,\n             description: projectDesc\n         };\n-        \n+\n         if (projectId) {\n             // Update existing project\n             await ProjectAPI.updateProject(projectId, projectData);\n@@ -1334,7 +1323,7 @@ async function handleProjectFormSubmit(e) {\n             await ProjectAPI.createProject(projectData);\n             showSuccess('Project created successfully');\n         }\n-        \n+\n         hideProjectModal();\n         await loadProjects();\n     } catch (error) {\n@@ -1352,21 +1341,21 @@ function initializeProjectEvents() {\n     if (addProjectBtn) {\n         addProjectBtn.addEventListener('click', () => showProjectModal());\n     }\n-    \n+\n     // Project form\n     const projectForm = document.getElementById('project-form');\n     if (projectForm) {\n         projectForm.addEventListener('submit', handleProjectFormSubmit);\n     }\n-    \n+\n     // Modal close buttons\n     const projectModal = document.getElementById('project-modal');\n     if (projectModal) {\n         const closeButtons = projectModal.querySelectorAll('.close-modal');\n         closeButtons.forEach(btn => {\n             btn.addEventListener('click', hideProjectModal);\n         });\n-        \n+\n         // Close on outside click\n         projectModal.addEventListener('click', (e) => {\n             if (e.target === projectModal) {\n@@ -1406,7 +1395,7 @@ const AWSCredentialsAPI = {\n         if (!response.ok) throw new Error('Failed to get credentials status');\n         return response.json();\n     },\n-    \n+\n     async save(credentials) {\n         const response = await fetch(`${CONFIG.API_BASE_URL}/aws-credentials`, {\n             method: 'POST',\n@@ -1419,7 +1408,7 @@ const AWSCredentialsAPI = {\n         if (!response.ok) throw new Error('Failed to save credentials');\n         return response.json();\n     },\n-    \n+\n     async delete() {\n         const response = await fetch(`${CONFIG.API_BASE_URL}/aws-credentials`, {\n             method: 'DELETE',\n@@ -1431,7 +1420,7 @@ const AWSCredentialsAPI = {\n         if (!response.ok) throw new Error('Failed to delete credentials');\n         return response.json();\n     },\n-    \n+\n     async toggle(enabled) {\n         const response = await fetch(`${CONFIG.API_BASE_URL}/aws-credentials/toggle`, {\n             method: 'PUT',\n@@ -1444,7 +1433,7 @@ const AWSCredentialsAPI = {\n         if (!response.ok) throw new Error('Failed to toggle credentials');\n         return response.json();\n     },\n-    \n+\n     async importCosts(months = 1) {\n         const response = await fetch(`${CONFIG.API_BASE_URL}/aws-cost-import`, {\n             method: 'POST',\n@@ -1463,7 +1452,7 @@ async function loadAWSCredentialsStatus() {\n     try {\n         const status = await AWSCredentialsAPI.getStatus();\n         const statusContainer = document.getElementById('aws-credentials-status');\n-        \n+\n         if (status.configured) {\n             statusContainer.innerHTML = `\n                 <div class=\"credential-configured\">\n@@ -1550,12 +1539,12 @@ async function saveAWSCredentials() {\n     const accessKeyId = document.getElementById('aws-access-key').value.trim();\n     const secretAccessKey = document.getElementById('aws-secret-key').value.trim();\n     const region = document.getElementById('aws-region').value;\n-    \n+\n     if (!accessKeyId || !secretAccessKey) {\n         showError('aws-credentials-error', 'Please enter both Access Key ID and Secret Access Key');\n         return;\n     }\n-    \n+\n     try {\n         showLoading();\n         await AWSCredentialsAPI.save({\n@@ -1564,10 +1553,10 @@ async function saveAWSCredentials() {\n             region,\n             enabled: true\n         });\n-        \n+\n         hideLoading();\n         showSuccess('aws-credentials-success', 'AWS credentials saved successfully!');\n-        \n+\n         // Retrieve and display IAM ARN\n         try {\n             const arn = await getIAMUserARN(accessKeyId, secretAccessKey, region);\n@@ -1577,7 +1566,7 @@ async function saveAWSCredentials() {\n         } catch (error) {\n             console.error('Could not retrieve IAM ARN:', error);\n         }\n-        \n+\n         setTimeout(() => {\n             hideAWSCredentialsForm();\n             loadAWSCredentialsStatus();\n@@ -1593,7 +1582,7 @@ async function deleteAWSCredentials() {\n     if (!confirm('Are you sure you want to remove your AWS credentials? This will disable automatic cost imports.')) {\n         return;\n     }\n-    \n+\n     try {\n         showLoading();\n         await AWSCredentialsAPI.delete();\n@@ -1622,20 +1611,20 @@ async function toggleAWSCredentials(enabled) {\n async function manualImportCosts() {\n     const monthsSelect = document.getElementById('import-months');\n     const months = monthsSelect ? parseInt(monthsSelect.value) : 1;\n-    \n-    const confirmMsg = months === 1 \n+\n+    const confirmMsg = months === 1\n         ? 'This will import AWS costs for the previous month. Continue?'\n         : `This will import AWS costs for the last ${months} months with automatic duplicate detection. Continue?`;\n-    \n+\n     if (!confirm(confirmMsg)) {\n         return;\n     }\n-    \n+\n     try {\n         showLoading();\n         const result = await AWSCredentialsAPI.importCosts(months);\n         hideLoading();\n-        \n+\n         if (result.results && result.results.length > 0) {\n             const userResult = result.results[0];\n             if (userResult.status === 'success') {\n@@ -1666,11 +1655,11 @@ async function manualImportCosts() {\n function initializeSettingsView() {\n     const saveBtn = document.getElementById('save-aws-credentials');\n     const cancelBtn = document.getElementById('cancel-aws-credentials');\n-    \n+\n     if (saveBtn) {\n         saveBtn.addEventListener('click', saveAWSCredentials);\n     }\n-    \n+\n     if (cancelBtn) {\n         cancelBtn.addEventListener('click', hideAWSCredentialsForm);\n     }\n@@ -1705,11 +1694,11 @@ async function getIAMUserARN(accessKeyId, secretAccessKey, region) {\n                 region\n             })\n         });\n-        \n+\n         if (!response.ok) {\n             throw new Error('Failed to retrieve IAM ARN');\n         }\n-        \n+\n         const data = await response.json();\n         return data.arn;\n     } catch (error) {\n@@ -1722,11 +1711,11 @@ function displayIAMARN(arn) {\n     const arnDisplay = document.getElementById('iam-arn-display');\n     const arnValue = document.getElementById('iam-arn-value');\n     const copyBtn = document.getElementById('copy-arn');\n-    \n+\n     if (arnDisplay && arnValue) {\n         arnValue.textContent = arn;\n         arnDisplay.style.display = 'block';\n-        \n+\n         // Add copy functionality\n         if (copyBtn) {\n             copyBtn.onclick = () => {"},{"sha":"2845149338750fb1e280a1a1a7f9f0215a913512","filename":"frontend/config.js","status":"added","additions":12,"deletions":0,"changes":12,"blob_url":"https://github.com/twinwicksllc/expense-tracker/blob/47271b5648babe3b47d16e32dc10af7aba50f51a/frontend%2Fconfig.js","raw_url":"https://github.com/twinwicksllc/expense-tracker/raw/47271b5648babe3b47d16e32dc10af7aba50f51a/frontend%2Fconfig.js","contents_url":"https://api.github.com/repos/twinwicksllc/expense-tracker/contents/frontend%2Fconfig.js?ref=47271b5648babe3b47d16e32dc10af7aba50f51a","patch":"@@ -0,0 +1,12 @@\n+// Configuration\n+const CONFIG = {\n+    API_BASE_URL: 'https://fcnq8h7mai.execute-api.us-east-1.amazonaws.com/prod',\n+    COGNITO: {\n+        USER_POOL_ID: 'us-east-1_iSsgMCrkM',\n+        CLIENT_ID: '6jb82h9lrvh29505t1ihavfte9',\n+        REGION: 'us-east-1',\n+        DOMAIN: 'https://expense-tracker-prod-v2.auth.us-east-1.amazoncognito.com',\n+        REDIRECT_URI: 'https://app.twin-wicks.com/callback',\n+        SIGN_OUT_URI: 'https://app.twin-wicks.com'\n+    }\n+};"},{"sha":"08bf19b88e02a5205cefa796b57860264e7e3f52","filename":"frontend/dashboard-enhanced.js","status":"modified","additions":22,"deletions":22,"changes":44,"blob_url":"https://github.com/twinwicksllc/expense-tracker/blob/47271b5648babe3b47d16e32dc10af7aba50f51a/frontend%2Fdashboard-enhanced.js","raw_url":"https://github.com/twinwicksllc/expense-tracker/raw/47271b5648babe3b47d16e32dc10af7aba50f51a/frontend%2Fdashboard-enhanced.js","contents_url":"https://api.github.com/repos/twinwicksllc/expense-tracker/contents/frontend%2Fdashboard-enhanced.js?ref=47271b5648babe3b47d16e32dc10af7aba50f51a","patch":"@@ -31,7 +31,7 @@ function initializeChartControls() {\n                 // Update active state\n                 periodButtons.forEach(btn => btn.classList.remove('active'));\n                 button.classList.add('active');\n-                \n+\n                 currentPeriod = period;\n                 await updateDashboard();\n             }\n@@ -48,7 +48,7 @@ function initializeChartControls() {\n                 // Update active state\n                 groupButtons.forEach(btn => btn.classList.remove('active'));\n                 button.classList.add('active');\n-                \n+\n                 currentGroupBy = groupBy;\n                 await updateMonthlyChart();\n             }\n@@ -69,13 +69,13 @@ function initializeChartControls() {\n async function updateDashboard() {\n     try {\n         console.log(`Updating dashboard: period=${currentPeriod}, groupBy=${currentGroupBy}`);\n-        \n+\n         const token = localStorage.getItem('idToken');\n         if (!token) {\n             throw new Error('Not authenticated');\n         }\n \n-        const response = await fetch(`${window.API_BASE_URL}/dashboard?period=${currentPeriod}&groupBy=${currentGroupBy}`, {\n+        const response = await fetch(`${CONFIG.API_BASE_URL}/dashboard?period=${currentPeriod}&groupBy=${currentGroupBy}`, {\n             method: 'GET',\n             headers: {\n                 'Authorization': `Bearer ${token}`,\n@@ -108,13 +108,13 @@ async function updateDashboard() {\n async function updateMonthlyChart() {\n     try {\n         console.log(`Updating chart: period=${currentPeriod}, groupBy=${currentGroupBy}`);\n-        \n+\n         const token = localStorage.getItem('idToken');\n         if (!token) {\n             throw new Error('Not authenticated');\n         }\n \n-        const response = await fetch(`${window.API_BASE_URL}/dashboard?period=${currentPeriod}&groupBy=${currentGroupBy}`, {\n+        const response = await fetch(`${CONFIG.API_BASE_URL}/dashboard?period=${currentPeriod}&groupBy=${currentGroupBy}`, {\n             method: 'GET',\n             headers: {\n                 'Authorization': `Bearer ${token}`,\n@@ -175,7 +175,7 @@ function updateComparisonIndicator(elementId, percentChange) {\n \n     const arrow = percentChange > 0 ? '' : percentChange < 0 ? '' : '';\n     const color = percentChange > 0 ? 'red' : percentChange < 0 ? 'green' : 'gray';\n-    \n+\n     element.textContent = `${arrow} ${Math.abs(percentChange).toFixed(1)}%`;\n     element.style.color = color;\n }\n@@ -187,34 +187,34 @@ async function fetchProjectsCache() {\n     if (projectsCache) {\n         return projectsCache; // Return cached version\n     }\n-    \n+\n     try {\n         const token = localStorage.getItem('idToken');\n         if (!token) {\n             console.warn('No auth token, cannot fetch projects');\n             return {};\n         }\n-        \n+\n         const response = await fetch(`${CONFIG.API_BASE_URL}/projects`, {\n             headers: { 'Authorization': `Bearer ${token}` }\n         });\n-        \n+\n         if (!response.ok) {\n             throw new Error(`Failed to fetch projects: ${response.status}`);\n         }\n-        \n+\n         const projects = await response.json();\n-        \n+\n         // Create lookup map: projectId -> projectName\n         const cache = {};\n         projects.forEach(p => {\n             cache[p.projectId] = p.name;\n         });\n-        \n+\n         projectsCache = cache;\n         console.log('Projects cache created:', Object.keys(cache).length, 'projects');\n         return cache;\n-        \n+\n     } catch (error) {\n         console.error('Failed to fetch projects for mapping:', error);\n         return {}; // Return empty cache on error\n@@ -256,23 +256,23 @@ async function renderMonthlyChart(monthlyData, groupKeys) {\n \n         // Prepare data for Chart.js\n         const labels = monthlyData.map(item => item.month);\n-        \n+\n         // Generate colors for each group\n         const colors = generateColors(groupKeys.length);\n-        \n+\n         // Fetch project names if grouping by project\n         let projectCache = {};\n         if (currentGroupBy === 'project') {\n             projectCache = await fetchProjectsCache();\n         }\n-        \n+\n         // Create datasets for each group key with proper labels\n         const datasets = groupKeys.map((key, index) => {\n             // Map project IDs to names if grouping by project\n-            const displayLabel = currentGroupBy === 'project' \n+            const displayLabel = currentGroupBy === 'project'\n                 ? getProjectName(key, projectCache)\n                 : key;\n-            \n+\n             return {\n                 label: displayLabel,\n                 data: monthlyData.map(item => item.breakdown[key] || 0),\n@@ -311,7 +311,7 @@ async function renderMonthlyChart(monthlyData, groupKeys) {\n                             font: {\n                                 size: window.innerWidth < 768 ? 9 : 11\n                             },\n-                            callback: function(value) {\n+                            callback: function (value) {\n                                 return '$' + value.toLocaleString();\n                             }\n                         }\n@@ -335,7 +335,7 @@ async function renderMonthlyChart(monthlyData, groupKeys) {\n                             size: window.innerWidth < 768 ? 10 : 12\n                         },\n                         callbacks: {\n-                            label: function(context) {\n+                            label: function (context) {\n                                 return context.dataset.label + ': $' + context.parsed.y.toFixed(2);\n                             }\n                         }\n@@ -391,7 +391,7 @@ function showError(message) {\n \n     // Fallback: console error\n     console.error(message);\n-    \n+\n     // Try to display in error container if it exists\n     const errorContainer = document.querySelector('#error-message');\n     if (errorContainer) {"},{"sha":"fca57a9aca27605c51e5589407149be16940e073","filename":"frontend/index.html","status":"modified","additions":1,"deletions":4,"changes":5,"blob_url":"https://github.com/twinwicksllc/expense-tracker/blob/47271b5648babe3b47d16e32dc10af7aba50f51a/frontend%2Findex.html","raw_url":"https://github.com/twinwicksllc/expense-tracker/raw/47271b5648babe3b47d16e32dc10af7aba50f51a/frontend%2Findex.html","contents_url":"https://api.github.com/repos/twinwicksllc/expense-tracker/contents/frontend%2Findex.html?ref=47271b5648babe3b47d16e32dc10af7aba50f51a","patch":"@@ -618,10 +618,7 @@ <h2 id=\"project-modal-title\">Add Project</h2>\n         </div>\n     </div>\n \n-    <script>\n-        // Define API_BASE_URL globally before other scripts\n-        window.API_BASE_URL = 'https://fcnq8h7mai.execute-api.us-east-1.amazonaws.com/prod';\n-    </script>\n+    <script src=\"config.js\"></script>\n     <script src=\"chart.min.js\"></script>\n     <script src=\"dashboard-enhanced.js\"></script>\n     <script src=\"oauth.js\"></script>"}]}